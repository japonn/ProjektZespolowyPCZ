@model WorkshopManager.ViewModels.RepairOrders.AssignMechanicVM

@{
    ViewData["Title"] = "Przydziel zlecenie do mechanika";
}

<h2>Przydziel zlecenie do mechanika</h2>

<div class="card mb-3">
    <div class="card-body">
        <h5 class="card-title">Szczegóły zlecenia</h5>
        <dl class="row">
            <dt class="col-sm-3">Klient</dt>
            <dd class="col-sm-9">@Model.ClientFullName</dd>

            <dt class="col-sm-3">Numer rejestracyjny</dt>
            <dd class="col-sm-9">@Model.RegistrationNumber</dd>

            <dt class="col-sm-3">Status</dt>
            <dd class="col-sm-9">@Model.Status</dd>

            <dt class="col-sm-3">Opis usterki</dt>
            <dd class="col-sm-9">@Model.IssueDescription</dd>
        </dl>
    </div>
</div>

<form asp-action="Assign" method="post">
    <input type="hidden" asp-for="OrderId" />

    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

    <div class="mb-3">
        <label asp-for="SelectedMechanicId" class="form-label"></label>
        <select asp-for="SelectedMechanicId" class="form-select">
            <option value="">-- wybierz mechanika --</option>
            @foreach (var mechanic in Model.Mechanics)
            {
                <option value="@mechanic.Id"
                        selected="@(Model.SelectedMechanicId == mechanic.Id)">
                    @mechanic.FullName
                </option>
            }
        </select>
        <span asp-validation-for="SelectedMechanicId" class="text-danger"></span>
    </div>


    <button type="submit" class="btn btn-primary">
        Zapisz przydział i rozpocznij naprawę
    </button>
    <a asp-action="Index" class="btn btn-secondary">
        Powrót do listy
    </a>
</form>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
